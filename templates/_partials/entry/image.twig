{# @param entry Entry aka block #}

{# Get image. Will be null if no image is present. #}

{# Check if eager loading makes sense here  #}
{# .eagerly(), withTransforms(), see https://craftcms.com/docs/5.x/development/eager-loading.html #}

{# In most cases we will only have a few image blocks per page,
so possibly eager loading will not have a significant effect.
Only measuring with real life data will tell.
#}

{% set image = entry.image.one %}

{% if image %}
    <figure>
        {# Always use a macro or an include to render images,
        there are too many possible options to take into account on every single usage. #}
        {% include '_partials/img.twig' with {
        	image,
            transform: {width: 768},
            srcset: [768, 400, '2x']
        } only %}

        {# Caption #}
        {% if entry.caption %}
            <figcaption>
                {{ entry.caption }}
            </figcaption>
        {% endif %}
    </figure>
{% endif %}